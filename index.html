<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>L Ward Interactive Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Leaflet + QGIS2Web styles -->
  <link rel="stylesheet" href="css/leaflet.css">
  <link rel="stylesheet" href="css/qgis2web.css">

  <style>
    html, body {
      margin: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
    }

    #sidebar {
      position: absolute;
      top: 0;
      left: 0;
      width: 250px;
      height: 100%;
      background: #ffffff;
      border-right: 1px solid #ccc;
      padding: 10px;
      overflow-y: auto;
      z-index: 1000;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    }

    #sidebar h3 {
      margin: 10px 0;
      font-size: 16px;
      color: #333;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
    }

    #map {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 250px;
    }

    #infoPanel {
      margin-top: 20px;
      padding-top: 10px;
      border-top: 1px solid #ddd;
    }

    #infoContent {
      font-size: 14px;
      color: #555;
      margin-top: 5px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    table td {
      padding: 3px 5px;
      border-bottom: 1px solid #eee;
    }

    table td:first-child {
      font-weight: 600;
      color: #333;
    }
  </style>
</head>

<body>
  <!-- Sidebar -->
  <div id="sidebar">
    <h3>Layers</h3>
    <div id="layerList">
      <label><input type="checkbox" id="chk_boundary" checked> L Ward Boundary</label><br>
      <label><input type="checkbox" id="chk_roads" checked> Roads</label><br>
      <label><input type="checkbox" id="chk_hotnagar" checked> Cold/Hot Nagar</label><br>
      <label><input type="checkbox" id="chk_hot" checked> Cold/Hot Zones</label><br>
      <label><input type="checkbox" id="chk_buildings" checked> Buildings</label><br>
      <label><input type="checkbox" id="chk_vegetation" checked> Vegetation</label><br>
    </div>

    <div id="infoPanel">
      <h3>Feature Info</h3>
      <div id="infoContent">Click on any feature to view attributes.</div>
    </div>
  </div>

  <!-- Map -->
  <div id="map"></div>

  <!-- Scripts -->
  <script src="js/qgis2web_expressions.js"></script>
  <script src="js/leaflet.js"></script>
  <script src="js/L.Control.Layers.Tree.min.js"></script>
  <script src="js/L.Control.Locate.min.js"></script>
  <script src="js/leaflet.rotatedMarker.js"></script>
  <script src="js/leaflet.pattern.js"></script>
  <script src="js/leaflet-hash.js"></script>
  <script src="js/Autolinker.min.js"></script>
  <script src="js/rbush.min.js"></script>
  <script src="js/labelgun.min.js"></script>
  <script src="js/labels.js"></script>
  <script src="js/leaflet.photon.js"></script>
  <script src="js/leaflet-measure.js"></script>

  <!-- Data Layers -->
  <script src="data/Lwardboundary_1.js"></script>
  <script src="data/roads_merged_3.js"></script>
  <script src="data/cold_hot_neighbourhood_nagar_4.js"></script>
  <script src="data/cold_hot_neighbourhood_5.js"></script>
  <script src="data/building_140725_6.js"></script>
  <script src="data/vegetation_7.js"></script>

  <script>
    // Map initialization
    var map = L.map('map', {
      zoomControl: true,
      maxZoom: 28,
      minZoom: 1
    }).setView([19.06, 72.88], 13);

    // Basemap (you can change this)
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    // Add layers from QGIS2Web
    var layer_Lwardboundary = new L.geoJson(json_Lwardboundary_1, {});
    var layer_Roads = new L.geoJson(json_roads_merged_3, {});
    var layer_HotNagar = new L.geoJson(json_cold_hot_neighbourhood_nagar_4, {});
    var layer_Hot = new L.geoJson(json_cold_hot_neighbourhood_5, {});
    var layer_Buildings = new L.geoJson(json_building_140725_6, {});
    var layer_Vegetation = new L.geoJson(json_vegetation_7, {});

    // Add all initially
    map.addLayer(layer_Lwardboundary);
    map.addLayer(layer_Roads);
    map.addLayer(layer_HotNagar);
    map.addLayer(layer_Hot);
    map.addLayer(layer_Buildings);
    map.addLayer(layer_Vegetation);

    // --- Toggle logic ---
    const toggleLayer = (checkboxId, layer) => {
      document.getElementById(checkboxId).addEventListener("change", function() {
        if (this.checked) map.addLayer(layer);
        else map.removeLayer(layer);
      });
    };

    toggleLayer("chk_boundary", layer_Lwardboundary);
    toggleLayer("chk_roads", layer_Roads);
    toggleLayer("chk_hotnagar", layer_HotNagar);
    toggleLayer("chk_hot", layer_Hot);
    toggleLayer("chk_buildings", layer_Buildings);
    toggleLayer("chk_vegetation", layer_Vegetation);

    // --- Feature Info panel ---
    function showFeatureInfo(props) {
      let html = "<table>";
      for (let key in props) {
        html += `<tr><td>${key}</td><td>${props[key]}</td></tr>`;
      }
      html += "</table>";
      document.getElementById("infoContent").innerHTML = html;
    }

    function attachClickInfo(layerGroup) {
      layerGroup.eachLayer(function(layer) {
        layer.on('click', function(e) {
          showFeatureInfo(layer.feature.properties);
        });
      });
    }

    // Attach click listeners
    attachClickInfo(layer_Lwardboundary);
    attachClickInfo(layer_Roads);
    attachClickInfo(layer_HotNagar);
    attachClickInfo(layer_Hot);
    attachClickInfo(layer_Buildings);
    attachClickInfo(layer_Vegetation);
  </script>
</body>
</html>
